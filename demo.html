<html>
<head>
    <title>Cross-Site Scripting Exercise</title>
</head>
<body>
    <h1>Welcome to our website!</h1>
    
    <!-- DOM-Based XSS | Reflected Outside Element -->

    <p>What is your name?</p>
    <input type="text" id="reflectedName">
    <button onclick="reflectedDemoOne()">Submit</button>
    <p id="showName"></p>
    <script>
        function reflectedDemoOne() {
            var reflectedInput = document.getElementById('reflectedName').value;
            var reflectedOutput = document.getElementById('showName');
            reflectedOutput.innerHTML = 'Welcome to our website, ' + reflectedInput + '!';
        }
    </script>

    <br><hr><br>
    <!-- DOM-Based XSS | Reflected Outside Element -->

    <p>What is your favorite website?</p>
    <input type="text" id="reflectedWebsite">
    <button onclick="reflectedDemoTwo()">Submit</button>
    <div id="showWebsite"></div>
    <script>
        function reflectedDemoTwo() {
            var reflectedInput = document.getElementById('reflectedWebsite').value;
            var reflectedOutput = document.getElementById('showWebsite');
            reflectedOutput.innerHTML = '<a href="' + reflectedInput + '">Here is a link to your favorite website!</a>';
        }
    </script>

    <br><hr><br>
    <!-- DOM-Based XSS | Stored XSS -->

    <script>
        let storedInput = window.location.hash.replace("#","") || "Blue...No, YellolkjsSDAAAAAAAAAAAHH!!!";
    </script>
    <p>What is your favorite color?</p>
    <input type="text" id="storedColor">
    <button onclick="storedDemo()">Submit</button>
    <p id="showColor"></p>
    <script>
        function storedDemo() {
            storedInput = document.getElementById('storedColor').value;
            var storedOutput = document.getElementById('showColor');
            storedOutput.innerHTML = 'Thanks!  We will remember your favorite color is: ' + storedInput;
        }
        var storedOutput = document.getElementById('showColor');
        storedOutput.innerHTML = "The last visitor's favorite color is: " + storedInput;
    </script>

    <br><hr><br>
    <!-- DOM-Based XSS | Eval is Evil-->

    <p>We built a calculator, give it a try!</p>
    <input type="text" id="equation">
    <button onclick="calculate()">Submit</button>
    <p id="showAnswer"></p>
    <script>
        function calculate() {
            var equationInput = document.getElementById('equation').value;
            var answerOutput = document.getElementById('showColor');
            alert("Answer: " + eval(equationInput));
        }
    </script>
</body>
</html>
